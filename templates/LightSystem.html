<!DOCTYPE html>
<html>

<head>
	<title>Bật / Tắt đèn</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
		integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
		crossorigin="anonymous" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

</head>

<body style='background-image: url("../static/phongkhach.jpg");
background-repeat: no-repeat;
background-size: cover;width: 100%;height: 100%;' class="text-white">

	<div class="container mt-5 text-center ">
		<!-- <h1 class="text-center mb-4">{{ obj }}</h1> -->
		<h2 class="text-center mb-4">HỆ THỐNG ĐÈN</h2>
		<div class="row">
			<div class="col-md-4">
				<h4>Đèn 1</h4>
				<i style=" font-size: 200px;" id="btn1" class="far fa-lightbulb"></i>
				<i style="display:none; width:100; font-size: 200px;" id="btn1-on"
					class="fas fa-lightbulb text-warning"></i>
				<div class="d-flex justify-content-around align-items-center mt-2">
					<button id="switch1-on" class="btn btn-warning text-white" style="font-weight: bold; ">ON</button>
					<button id="switch1-off" class="btn btn-danger text-white"
						style="font-weight: bold; display: none;">OFF</button>
				</div>

			</div>
			<div class="col-md-4">
				<h4>Đèn 2</h4>
				<i style=" font-size: 200px;" id="btn2" class="far fa-lightbulb"></i>
				<i style="display:none; width:100; font-size: 200px;" id="btn2-on"
					class="fas fa-lightbulb text-warning"></i>
				<div class="d-flex justify-content-around align-items-center mt-2">
					<button id="switch2-on" class="btn btn-warning text-white" style="font-weight: bold;">ON</button>
					<button id="switch2-off" class="btn btn-danger text-white"
						style="font-weight: bold;display: none;">OFF</button>
				</div>
			</div>
			<div class="col-md-4">
				<h4>Đèn 3</h4>
				<i style=" font-size: 200px;" id="btn3" class="far fa-lightbulb"></i>
				<i style="display:none; width:100; font-size: 200px;" id="btn3-on"
					class="fas fa-lightbulb text-warning"></i>
				<div class="d-flex justify-content-around align-items-center mt-2">
					<button id="switch3-on" class="btn btn-warning text-white" style="font-weight: bold;">ON</button>
					<button id="switch3-off" class="btn btn-danger text-white"
						style="font-weight: bold;display: none;">OFF</button>
				</div>
			</div>
		</div>
		<div class="row mt-5">
			<div class="col-md-6 " style="display: flex;justify-content: center;
			align-items: center;">
				<div class="custom-control custom-switch text-white text-center" style="background: #00F260;  /* fallback for old browsers */
				background: -webkit-linear-gradient(to left, #0575E6, #00F260);  /* Chrome 10-25, Safari 5.1-6 */
				background: linear-gradient(to left, #0575E6, #00F260); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
				;font-size: 150px;border-radius: 50%; width: 300px; height: 300px; position: relative;">
					<span id="switch1" style="position: absolute; top: 30px; left: 37px;cursor: pointer;">
						ON
					</span>
				</div>
			</div>
			<div class="col-md-6" style="display: flex;justify-content: center;
			align-items: center;">
				<div class="custom-control custom-switch text-white text-center" style="background: #ed213a;  /* fallback for old browsers */
				background: -webkit-linear-gradient(to left, #ed213a, #93291e);  /* Chrome 10-25, Safari 5.1-6 */
				background: linear-gradient(to left, #ed213a, #93291e); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
				;font-size: 150px;border-radius: 50%; width: 300px; height: 300px; position: relative;">
					<span id="switch2" style="position: absolute; top: 30px; left: 20px; cursor: pointer;">
						OFF
					</span>
				</div>
			</div>

		</div>

		<button class="btn btn-light " style="position: absolute; top:10px; right:10px" id="showBtn">Danh sách xác
			thực thành công</button>
		<button class="btn btn-light " style="position: absolute; top:55px; right:10px" id="show2Btn">Danh sách xác
			thực thất bại</button>
		<button class="btn btn-light " style="position: absolute; top:100px; right:10px" id="exitBtn">Thoát</button>
		<div class="container bg-light"
			style="display: none;position: fixed;z-index: 10;top: 5%;bottom:5%;border-radius: 20px;" id="myDiv">
			<div class="d-flex justify-content-between align-items-center text-dark">
				<button class="btn btn-danger " id="deleteImageBtn">Xóa lịch sử</button>

				<!-- <h2 class="text-center mb-2">Danh sách truy cập</h2> -->
				<h2 class="" id="close-btn" style="cursor: pointer;">X</h2>
			</div>
			<div id="alert-success" class="alert alert-success alert-dismissible fade show" style="display:none;">
				<!-- <button id="deleteHistoryBtn" type="button" class="close" data-dismiss="alert">&times;</button> -->
				<strong>Đã xóa lịch sử xác thực thành công!</strong>
			</div>

			<div class="" id="image-list" style="max-height: 80%;overflow-y: scroll; overflow-x: hidden;">
				<div class="">


					<div class="row p-2">
						<div class="col-4 text-dark">
							<h2>STT</h2>
						</div>
						<div class="col-8 text-dark">
							<h2>Hình ảnh xác thực thành công</h2>
						</div>
					</div>
					{% for file in imagesDetect %}
					<div class="row mt-2">
						<div class="col-4 d-flex">
							<h3 class="text-center m-auto text-dark">
								{{ loop.index }}
							</h3>
						</div>
						{% if file.endswith('.jpg') or file.endswith('.png') or file.endswith('.jpeg')%}
						<div class="col-8">
							<img style="width: 100%;border-radius: 20px;"
								src="{{ url_for('static', filename='detectImage/' + file) }}" />
						</div>
						{% elif file.endswith('.mp4') %}
						<div class="col-8">
							<video width="100%"  controls>
								<source src="{{ url_for('static', filename='detectImage/' + file) }}" type="video/mp4">
							</video>
						</div>

						{% endif %}



					</div>
					{% endfor %}
				</div>


			</div>
		</div>
		<div class="container bg-light"
			style="display: none;position: fixed;z-index: 10;top: 5%;bottom:5%;border-radius: 20px;" id="myDiv2">
			<div class="d-flex justify-content-between align-items-center text-dark">
				<button class="btn btn-danger " id="deleteImageBtn2">Xóa lịch sử</button>

				<!-- <h2 class="text-center mb-2">Danh sách truy cập</h2> -->
				<h2 class="" id="close-btn2" style="cursor: pointer;">X</h2>
			</div>
			<div id="alert-success2" class="alert alert-success alert-dismissible fade show" style="display:none;">
				<!-- <button id="deleteHistoryBtn2" type="button" class="close" data-dismiss="alert">&times;</button> -->
				<strong>Đã xóa lịch sử xác thực thất bại !</strong>
			</div>

			<div class="" id="image-list2" style="max-height: 80%;overflow-y: scroll; overflow-x: hidden;">
				<div class="">


					<div class="row p-2">
						<div class="col-4 text-dark">
							<h2>STT</h2>
						</div>
						<div class="col-8 text-dark">
							<h2>Hình ảnh xác thực thất bại</h2>
						</div>
					</div>
					{% for file in noImagesDetect %}
					<div class="row mt-2">
						<div class="col-4 d-flex">
							<h3 class="text-center m-auto text-dark">
								{{ loop.index }}
							</h3>
						</div>


						{% if file.endswith('.jpg') or file.endswith('.png')  or file.endswith('.jpeg') %}
						<div class="col-8">
							<div class="col-8">
								<img style="width: 100%;border-radius: 20px;"
									src="{{ url_for('static', filename='nodetectImage/' + file) }}" />
							</div>
						</div>
						{% elif file.endswith('.mp4') %}
						<div class="col-8">
							<video width="100%" controls>
								<source src="{{ url_for('static', filename='nodetectImage/' + file) }}"
									type="video/mp4">
							</video>
						</div>

						{% endif %}
					</div>
					{% endfor %}



				</div>


			</div>
		</div>



	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
		const showBtn = document.getElementById('showBtn');
		const showBtn2 = document.getElementById('show2Btn');
		const exitBtn = document.getElementById('exitBtn');
		const closeBtn = document.getElementById('close-btn');
		const closeBtn2 = document.getElementById('close-btn2');

		function toggleDiv() {
			document.getElementById('myDiv2').style.display = 'none'
			const div = document.getElementById('myDiv');
			if (div.style.display === 'none') {
				div.style.display = 'block';
			} else {
				div.style.display = 'none';
			}
		}
		showBtn.addEventListener('click', toggleDiv);
		closeBtn.addEventListener('click', toggleDiv);
		exitBtn.addEventListener('click', function () {
			window.location.href = '/';
		});
		function toggleDiv2() {
			document.getElementById('myDiv').style.display = 'none'
			const div = document.getElementById('myDiv2');
			if (div.style.display === 'none') {
				div.style.display = 'block';
			} else {
				div.style.display = 'none';
			}
		}
		showBtn2.addEventListener('click', toggleDiv2);
		closeBtn2.addEventListener('click', toggleDiv2);
	</script>
	<!-- <script>
		document.addEventListener("DOMContentLoaded", function () {
			var modalButton = document.querySelector(".modal-button");
			modalButton.addEventListener("click", function () {
				var modal = document.querySelector("#myModal");
				modal.classList.toggle("show");
			});



			$('#deleteModal').on('show.bs.modal', function (event) {
				var button = $(event.relatedTarget); // Nút "Xóa" được nhấn


				// Hiển thị thông tin của dòng lên modal xác nhận
				var modal = $(this);
				modal.find('.modal-body').text('Bạn');
			});

			// const filename = new URLSearchParams(window.location.search).get('filename');
			// document.getElementById('filename').src = '../static/detectImage/' + filename;

		});

	</script> -->

	<script>
		$(document).ready(function () {

			$("#switch1-on").click(function () {

				document.getElementById("btn1-on").style.display = "block";
				document.getElementById("btn1").style.display = "none";
				document.getElementById("switch1-off").style.display = "block";
				document.getElementById("switch1-on").style.display = "none";



			});
			$("#switch1-off").click(function () {

				document.getElementById("btn1-on").style.display = "none";
				document.getElementById("btn1").style.display = "block";

				document.getElementById("switch1-off").style.display = "none";
				document.getElementById("switch1-on").style.display = "block";

			});
			$("#switch2-on").click(function () {


				document.getElementById("btn2-on").style.display = "block";
				document.getElementById("btn2").style.display = "none";
				document.getElementById("switch2-off").style.display = "block";
				document.getElementById("switch2-on").style.display = "none";


			}); $("#switch2-off").click(function () {


				document.getElementById("btn2-on").style.display = "none";
				document.getElementById("btn2").style.display = "block";

				document.getElementById("switch2-off").style.display = "none";
				document.getElementById("switch2-on").style.display = "block";


			});
			$("#switch3-on").click(function () {


				document.getElementById("btn3-on").style.display = "block";
				document.getElementById("btn3").style.display = "none";
				document.getElementById("switch3-off").style.display = "block";
				document.getElementById("switch3-on").style.display = "none";

			}); $("#switch3-off").click(function () {


				document.getElementById("btn3-on").style.display = "none";
				document.getElementById("btn3").style.display = "block";

				document.getElementById("switch3-off").style.display = "none";
				document.getElementById("switch3-on").style.display = "block";
			});
			$("#switch1").click(function () {

				document.getElementById("btn1-on").style.display = "block";
				document.getElementById("btn1").style.display = "none";
				document.getElementById("btn2-on").style.display = "block";
				document.getElementById("btn2").style.display = "none";
				document.getElementById("btn3-on").style.display = "block";
				document.getElementById("btn3").style.display = "none";


				document.getElementById("switch1-off").style.display = "block";
				document.getElementById("switch2-off").style.display = "block";
				document.getElementById("switch3-off").style.display = "block";
				document.getElementById("switch1-on").style.display = "none";
				document.getElementById("switch2-on").style.display = "none";
				document.getElementById("switch3-on").style.display = "none";

			});

			$("#switch2").click(function () {
				document.getElementById("btn1-on").style.display = "none";
				document.getElementById("btn1").style.display = "block";
				document.getElementById("btn2-on").style.display = "none";
				document.getElementById("btn2").style.display = "block";
				document.getElementById("btn3-on").style.display = "none";
				document.getElementById("btn3").style.display = "block";


				document.getElementById("switch1-off").style.display = "none";
				document.getElementById("switch2-off").style.display = "none";
				document.getElementById("switch3-off").style.display = "none";
				document.getElementById("switch1-on").style.display = "block";
				document.getElementById("switch2-on").style.display = "block";
				document.getElementById("switch3-on").style.display = "block";
			});
		});
	</script>
	<script>

		$("#deleteImageBtn").click(() => {
			$.ajax({
				url: "/deleteHistory",
				type: "GET",
				error: function (data) {
					console.log("delete error", data);


				},
				success: function (data) {
					$("#image-list").empty();
					console.log(data);
					$("#alert-success").show(); // Hiển thị phần tử
					setTimeout(function () {
						$("#alert-success").hide(); // Ẩn phần tử sau 1 giây
					}, 1500);

				}
			});
		})
		$("#deleteImageBtn2").click(() => {
			$.ajax({
				url: "/deleteHistory2",
				type: "GET",
				error: function (data) {
					console.log("delete error", data);

				},
				success: function (data) {
					$("#image-list2").empty();
					console.log(data);
					$("#alert-success2").show(); // Hiển thị phần tử
					setTimeout(function () {
						$("#alert-success2").hide(); // Ẩn phần tử sau 1 giây
					}, 1500);

				}
			});
		})
	</script>
</body>

</html>